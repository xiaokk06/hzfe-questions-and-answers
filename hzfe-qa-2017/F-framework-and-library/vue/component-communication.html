<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HZFE奶库</title>
    <meta name="description" content="前端面试知识题库">
    <link rel="icon" href="/hzfe-questions-and-answers/favicon.ico">
  <link rel="manifest" href="/hzfe-questions-and-answers/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/hzfe-questions-and-answers/icons/apple-touch-icon-152x152.png">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/hzfe-questions-and-answers/assets/css/0.styles.9ba17c25.css" as="style"><link rel="preload" href="/hzfe-questions-and-answers/assets/js/app.01a22e1b.js" as="script"><link rel="preload" href="/hzfe-questions-and-answers/assets/js/30.09a6d5a8.js" as="script"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/2.44740bb8.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/3.52166c8d.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/4.d9ea8284.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/5.66c0830c.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/6.2fb8a8cd.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/7.fc2f24a5.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/8.2b8fddf5.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/9.e8725c68.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/10.3ea8bd14.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/11.ff7f7a2b.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/12.3d3272cd.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/13.ed5e9b03.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/14.34e3bfd7.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/15.9385d67d.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/16.eb053bd4.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/17.7be79a98.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/18.77d7d5aa.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/19.60482dab.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/20.38b3d295.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/21.26fab2a4.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/22.64d5b12d.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/23.5e06bad6.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/24.24175e3d.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/25.85db5401.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/26.d3a2b93f.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/27.dfcb0aef.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/28.83dbcc4d.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/29.57e1b2dd.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/31.fb64dbcf.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/32.c6d7e68c.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/33.d0c82836.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/34.0985206e.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/35.8f39b224.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/36.0f607250.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/37.c5b3824e.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/38.bba0091f.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/39.46fb9073.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/40.ce4996ec.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/41.ae462791.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/42.00cd8269.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/43.e19731e7.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/44.68c4c62e.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/45.9c7de21c.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/46.592f90fc.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/47.3882f0d6.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/48.4a0940d2.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/49.803b2c2e.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/50.78990b60.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/51.7e81e52c.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/52.cfec2a37.js">
    <link rel="stylesheet" href="/hzfe-questions-and-answers/assets/css/0.styles.9ba17c25.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/hzfe-questions-and-answers/" class="home-link router-link-active"><!----> <span class="site-name">HZFE奶库</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hzfe-questions-and-answers/toc.html" class="nav-link">目录</a></div><div class="nav-item"><a href="https://hzfe.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  HZFE
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/HZFE/hzfe-questions-and-answers" target="_blank" rel="noopener noreferrer" class="repo-link">
    GITHUB
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hzfe-questions-and-answers/toc.html" class="nav-link">目录</a></div><div class="nav-item"><a href="https://hzfe.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  HZFE
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/HZFE/hzfe-questions-and-answers" target="_blank" rel="noopener noreferrer" class="repo-link">
    GITHUB
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-group-items"><li><a href="/hzfe-questions-and-answers/hzfe-qa-2017/F-framework-and-library/vue/component-communication.html#前言" class="sidebar-link">前言</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/hzfe-questions-and-answers/hzfe-qa-2017/F-framework-and-library/vue/component-communication.html#父子组件通信" class="sidebar-link">父子组件通信</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hzfe-questions-and-answers/hzfe-qa-2017/F-framework-and-library/vue/component-communication.html#神奇的prop" class="sidebar-link">神奇的Prop :)</a></li><li class="sidebar-sub-header"><a href="/hzfe-questions-and-answers/hzfe-qa-2017/F-framework-and-library/vue/component-communication.html#神奇的自定义事件" class="sidebar-link">神奇的自定义事件 :)</a></li></ul></li><li><a href="/hzfe-questions-and-answers/hzfe-qa-2017/F-framework-and-library/vue/component-communication.html#非父子组件的通信" class="sidebar-link">非父子组件的通信</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hzfe-questions-and-answers/hzfe-qa-2017/F-framework-and-library/vue/component-communication.html#event-bus" class="sidebar-link">Event Bus</a></li><li class="sidebar-sub-header"><a href="/hzfe-questions-and-answers/hzfe-qa-2017/F-framework-and-library/vue/component-communication.html#broadcast-和-dispatch" class="sidebar-link">$broadcast 和 $dispatch</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 此页面贡献者：厂长</span>
</code></pre></div><h1 id="vue-组件通信"><a href="#vue-组件通信" aria-hidden="true" class="header-anchor">#</a> Vue 组件通信</h1> <h2 id="前言"><a href="#前言" aria-hidden="true" class="header-anchor">#</a> 前言</h2> <p>Vue 拥有强大的组件系统，组件都需要配合来使用，每个组件都是独立的个体，组合组件时必然会出现组件间通信的问题。</p> <h2 id="父子组件通信"><a href="#父子组件通信" aria-hidden="true" class="header-anchor">#</a> 父子组件通信</h2> <p>父子组件是非常常见的一种组合方式，Vue 也设计了一套高度解耦并且非常优雅的API来解决了父子组件通信的问题。</p> <p><img src="/hzfe-questions-and-answers/assets/img/props-events.27584e95.png" alt="props-events"></p> <blockquote><p>以上图片来自Vue 官网</p></blockquote> <h3 id="神奇的prop"><a href="#神奇的prop" aria-hidden="true" class="header-anchor">#</a> 神奇的Prop 😃</h3> <p>Prop 就像函数的参数，调用时外部（父组件）传入</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 父组件 计算器组件</span>
Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'calculator'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'calculator'</span><span class="token punctuation">,</span>
    template<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`
        &lt;div&gt;
            &lt;input v-model=&quot;firstNumber&quot; type=&quot;number&quot;&gt;加
            &lt;input v-model=&quot;secondNumber&quot; type=&quot;number&quot;&gt;等于
            &lt;addition 
                :first-number=&quot;firstNumber&quot; 
                :second-number=&quot;secondNumber&quot;&gt;
            &lt;/addition&gt;   
        &lt;/div&gt;   
    `</span></span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            firstNumber<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            secondNumber<span class="token punctuation">:</span> <span class="token number">0</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 子组件 加法组件</span>
Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'addition'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'addition'</span><span class="token punctuation">,</span>
    template<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`
        &lt;span&gt;{{ firstNumber + secondNumber }}&lt;/span&gt;
    `</span></span><span class="token punctuation">,</span>
    props<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'firstNumber'</span><span class="token punctuation">,</span> <span class="token string">'secondNumber'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>以上示例代码父组件往子组件 Prop 里传递数值，子组件计算 Prop 结果显示在模板中。</p> <p><strong>注意：Prop如果不使用<code>v-bind</code>的方式传递接受的就是一个字符串，如果需要作为 JavaScript 表达式就需要使用<code>v-bind</code>的方式传递 Prop。</strong></p> <blockquote><p>Prop 是单向绑定的：当父组件的属性变化时，将传递给子组件，但是反过来不会。这是为了防止子组件无意间修改了父组件的状态，来避免应用的数据流变得难以理解。</p></blockquote> <p>以上摘自 Vue 官网，这就意味着你将无法直接像用<code>v-model</code>一样用 Prop 来传递数据。当然你也可以通过 <code>.sync</code>修饰符和自定义组件的<code>v-model</code>来实现双向绑定的功能。
<strong><code>.sync</code>修饰符需要使用 Vue 2.3.0 以上版本</strong></p> <p>Prop 还支持对传入的数据进行验证，此文不在赘述，需要详细了解 Prop 的用法请参考 Vue 的官方文档。</p> <h3 id="神奇的自定义事件"><a href="#神奇的自定义事件" aria-hidden="true" class="header-anchor">#</a> 神奇的自定义事件 😃</h3> <p>父组件通过 Prop 来和子组件进行通信，子组件通过自定义事件的机制来和父组件通信。</p> <p>接下来我们修改下示例代码，把按钮封装到加法组件里，加法组件（子组件）向父组件提供自定义事件<code>on-addition</code>，父组件绑定事件函数，加法组件（子组件）的按钮被点击后就去触发<code>on-addition</code>自定义事件，父组件传入的事件处理函数就会被调用，父组件就能从事件处理函数的参数中拿到相应数据。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 父组件 计算器组件</span>
Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'calculator'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'calculator'</span><span class="token punctuation">,</span>
    template<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`
        &lt;div&gt;
            &lt;input v-model=&quot;firstNumber&quot; type=&quot;number&quot;&gt;加
            &lt;input v-model=&quot;secondNumber&quot; type=&quot;number&quot;&gt;
            &lt;addition 
                :first-number=&quot;firstNumber&quot; 
                :second-number=&quot;secondNumber&quot;
                @on-addition=&quot;onAddition&quot;&gt;
            &lt;/addition&gt;
            {{ result }}   
        &lt;/div&gt;   
    `</span></span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            firstNumber<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            secondNumber<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            result<span class="token punctuation">:</span> <span class="token number">0</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token function">onAddition</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>result <span class="token operator">=</span> result<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 子组件 加法组件</span>
Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'addition'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'addition'</span><span class="token punctuation">,</span>
    template<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`
        &lt;button type=&quot;button&quot; @click=&quot;handleAddition&quot;&gt;等于&lt;/button&gt;
    `</span></span><span class="token punctuation">,</span>
    props<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'firstNumber'</span><span class="token punctuation">,</span> <span class="token string">'secondNumber'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token function">handleAddition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> result <span class="token operator">=</span> firstNumber <span class="token operator">+</span> secondNumber<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'on-addition'</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="非父子组件的通信"><a href="#非父子组件的通信" aria-hidden="true" class="header-anchor">#</a> 非父子组件的通信</h2> <h3 id="event-bus"><a href="#event-bus" aria-hidden="true" class="header-anchor">#</a> Event Bus</h3> <p>非父子组件也就是同级组件（兄弟组件），或者为嵌套较深多层级的父子组件。简单情况下 Vue 官方文档介绍了使用 Event Bus 的方式来处理非父子级组件间的通信。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> bus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    template<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`
        &lt;button type=&quot;button&quot; @click=&quot;handleClick&quot;&gt;&lt;/button&gt;
    `</span></span><span class="token punctuation">,</span>
    methndos<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            bus<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'a-click'</span><span class="token punctuation">,</span> <span class="token string">'我a组件被点击啦!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    template<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`
        &lt;p&gt;b组件接受到的消息：{{ msg }}&lt;/p&gt;
    `</span></span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            msg<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        bus<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'a-click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>msg<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>msg <span class="token operator">=</span> msg<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Event Bus 其实就是通过一个中间的 Vue 空实例，在这个 Vue 空实例上面订阅事件和触发事件，达到非父子组件通信的目的。
在实际开发项目中，Event Bus 如果用的很多，代码会变得难以维护。</p> <p>复杂的非父子级组件通信问题，可以采用状态管理模式。推荐使用<a href="https://vuex.vuejs.org/" target="_blank" rel="noopener noreferrer">Vuex<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ，Vuex 是 Vue 官方基于状态管理模式实现的库。</p> <h3 id="broadcast-和-dispatch"><a href="#broadcast-和-dispatch" aria-hidden="true" class="header-anchor">#</a> $broadcast 和 $dispatch</h3> <p><code>$broadcast</code>和<code>$dispatch</code>原本是 Vue 1.x 中的API，在 Vue 2.x 中已经被移除。
<code>$broadcast</code>可以去广播事件通知当前组件的所有后代，然后触发相应的事件。<code>$dispatch</code>则是组件往父级向上冒泡去触发相应的事件。</p> <p><code>$broadcast</code>和<code>$dispatch</code>在编写 Vue 的一些第三方组件库的时候非常有用，虽然已经在 Vue 2.x 中被移除，但Element UI等一些比较大的开源组件库里，都去重新实现了这两个API。</p> <p><a href="https://github.com/ElemeFE/element/blob/dev/src/mixins/emitter.js" target="_blank" rel="noopener noreferrer">Element UI 中的$broadcast和$dispatch实现的源码<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Element UI中的这两个API和 Vue 1.x 的有些不同，Element UI是通过指定组件名来定向的去触发某一个组件中相应的事件，而不是向 Vue 1.x 中那样事件广播。有兴趣的朋友可以读下源码。</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/HZFE/hzfe-questions-and-answers/edit/master/docs/hzfe-qa-2017/F-framework-and-library/vue/component-communication.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">8/2/2018, 12:15:52 PM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/hzfe-questions-and-answers/assets/js/30.09a6d5a8.js" defer></script><script src="/hzfe-questions-and-answers/assets/js/app.01a22e1b.js" defer></script>
  </body>
</html>
